<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3">

<head>
    <meta charset="UTF-8">
    <title>Список всех бронирований</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css"/>
    <link type="text/css" href="../static/css/main.css" th:href="@{/css/main.css}" rel="stylesheet" />
    <link type="text/css" href="../static/css/login.css" th:href="@{/css/login.css}" rel="stylesheet" />
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
</head>
<body>
<header>
    <nav class="navbar navbar-expand-sm bg-light">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="/index-admin">Главная</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/contacts">Контакты</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/about">О нас</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" th:href="@{/reservation-list-admin}">Все бронирования</a>
            </li>
        </ul>
        <div id="logout">
            <form action="/logout" method="post">
                <input type="submit" value="Выйти из системы" id="logout-btn">
            </form>
        </div>
    </nav>
</header>


<div class="fadeInDown contact-div" id="formContent">
<div style="margin:10px">
    <div class="contact-info fadeIn first">
        <h1 th:inline="text">Список забронированных мест</h1>
    </div>
    <div class="fadeIn second">
        <div>
            <form th:action="@{/reservation-filter}"  method="post">
                <input type="date" th:name="startDate" th:value="${startDate}" class="filter-field">
                <input class="ticket filter" type="submit" value="Отфильтровать по дате начала бронирования"/>
            </form>
        </div>
        <table>
            <thead>
            <tr>
                <th> Фамилия </th>
                <th> Имя </th>
                <th> Email </th>
                <th> Номер телефона </th>
                <th> Номер автомобиля </th>
                <th> Дата и время начала бронирования </th>
                <th> Дата и время окончания бронирования </th>
                <th> Расположение </th>
                <th> Место </th>
                <th> Управление </th>
            </tr>
            </thead>
            <tbody>
            <tr th:if="${reservations.empty}">
                <td colspan="10"> Пока не сделано ни одного бронирования </td>
            </tr>
            <tr th:each="reservation : ${reservations}">
                <td><span th:text="${reservation.getUser().getLastName()}"> LastName </span></td>
                <td><span th:text="${reservation.getUser().getFirstName()}"> FirstName </span></td>
                <td><span th:text="${reservation.getUser().getEmail()}"> Email </span></td>
                <td><span th:text="${reservation.getUser().getPhone()}"> Phone </span></td>
                <td><span th:text="${reservation.getCarNumber()}"> StartDateTime </span></td>
                <td><span th:text="${reservation.getStartDateTime()}"> StartDateTime </span></td>
                <td><span th:text="${reservation.getEndDateTime()}"> EndDateTime </span></td>
                <td><span th:text="${reservation.getLocation().getAddress()}"> Location </span></td>
                <td><span th:text="${reservation.getPlace().getName()}"> Place </span></td>
                <td><span>
                    <a th:href=@{/reservation-remove/{reservationId}(reservationId=${reservation.getId()})} class="delete ticket">Удалить бронирование</a>
                    <a th:href=@{/pdf/{reservationId}(reservationId=${reservation.getId()})} class="ticket ticket-admin">Талон в pdf </a>

                </span></td>
            </tr>
            </tbody>
        </table>
        <div>
            <form th:action="@{/pdf-list}"  method="get">
                <input type="hidden" th:name="filtered" th:value="${startDate}" class="filter-field">
                <input class="pdf-list ticket" type="submit" style="margin: 10px 0;" value="Получить список в pdf"/>
            </form>
        </div>
    </div>
</div>

</body>
</html>